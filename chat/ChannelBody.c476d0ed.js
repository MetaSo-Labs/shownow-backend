var D=(A,Q,z)=>new Promise((G,L)=>{var H=S=>{try{V(z.next(S))}catch(E){L(E)}},N=S=>{try{V(z.throw(S))}catch(E){L(E)}},V=S=>S.done?G(S.value):Promise.resolve(S.value).then(H,N);V((z=z.apply(A,Q)).next())});import{d as U,o as s,c as p,a as t,b as i,U as Re,t as $,dh as Tt,bi as Ve,d4 as Pt,i as ie,bw as $t,j as f,h as ce,cH as St,cx as Ee,fi as jt,cy as te,M as B,f as Bt,g as ue,cG as Mt,u as n,m as l,e as At,v as R,Z as de,S as qt,bo as Kt,V as W,w as M,Y as ae,F as pe,fG as ve,fH as zt,fI as Ft,fV as De,fo as Ut,fp as Rt,dy as Vt,dz as Et,bg as re,cC as We,fW as Dt,fX as Wt,fY as Lt,fZ as Xt,f_ as Ot,f$ as Qt,cb as Gt,_ as Le,q as Ht,x as Xe,cF as Nt,fk as Oe,fA as Jt,ft as Yt,aI as Zt,g0 as ea,s as ta,g1 as aa,p as ra,n as la,__tla as sa}from"./index.02fc6cc9.js";import{S as na,__tla as oa}from"./Sticker.a2ddf828.js";import{j as ia,__tla as ca}from"./index.7debbede.js";import{B as ua,H as da,P as pa,__tla as va}from"./popover.bf3e6abc.js";let Qe,ye,ya=Promise.all([(()=>{try{return sa}catch(A){}})(),(()=>{try{return oa}catch(A){}})(),(()=>{try{return ca}catch(A){}})(),(()=>{try{return va}catch(A){}})()]).then(()=>D(void 0,null,function*(){let A,Q,z,G,L,H,N,V,S,E,me,fe,he,ge,xe,ke,be,we,_e,Ce,Ie,Te,Pe,$e,Se,je,Be,Me,Ae;A={class:"relative h-full w-full flex items-center justify-center"},Q={class:"mt-2"},ye=U({__name:"ImagePreview",props:{src:{default:""},isPrivateChat:{type:Boolean,default:!1},chatPubkeyForDecrypt:{default:""}},setup(c){const o=c,h=()=>{const d=Tt(o.src,-1);window.open(d,"_blank")};return(d,y)=>{const g=Ve,q=Pt;return s(),p("div",{class:"fixed inset-0 bg-black/80 fullscreen w-screen z-[60]",onClick:y[2]||(y[2]=T=>d.$emit("close"))},[t("div",A,[t("div",{class:"text-white absolute right-[16PX] top-[16PX]",onClick:y[0]||(y[0]=T=>d.$emit("close"))},[i(g,{name:"x_circle",class:"w-10 h-10 text-dark-300 hover:text-dark-100 cursor-pointer"})]),t("div",{class:"!w-[90%] !max-h-[80%] overflow-y-auto pr-3 -mr-3 lg:!w-[480PX]",onClick:y[1]||(y[1]=Re(()=>{},["stop"]))},[i(q,{src:c.src,class:"h-3/5 flex items-center",customClass:"w-full rounded-md object-scale-down",width:-1,isPrivateChat:c.isPrivateChat,chatPubkeyForDecrypt:c.chatPubkeyForDecrypt},null,8,["src","isPrivateChat","chatPubkeyForDecrypt"]),t("div",Q,[t("span",{class:"text-white text-sm opacity-50 lg:hover:opacity-100 lg:hover:underline lg:cursor-pointer",onClick:h},$(d.$t("Talk.Channel.view_original")),1)])])])])}}}),z={key:0,class:"bg-white dark:bg-gray-700 rounded-lg"},G={key:0,class:"quote flex flex-align-center rounded-lg"},L={class:"flex1 flex flex-align-center whitespace-nowrap"},H={class:"grow truncate"},N={key:1,class:"border-b-2 border-solid border-dark-200 dark:border-gray-600 pb-2 px-3 pt-3"},V={class:"p-2 w-50 h-50 main-border still relative"},S={class:"absolute right-0 top-0 z-10 -my-2 -mx-3 flex space-x-2.5 items-center"},E={class:""},me={key:1,class:"w-3.5 h-3.5 bg-gray-100 dark:bg-gray-950 rounded shadow-inner shadow-gray-200 dark:shadow-gray-950"},fe=["src"],he={class:"self-stretch lg:ml-2 py-2 pl-3 flex items-center grow"},ge=["rows","placeholder"],xe={class:"flex h-full py-1 items-center shrink-0"},ke={class:"p-2 w-9 h-9 transition-all lg:hover:animate-wiggle cursor-pointer"},be={class:"bg-white dark:bg-gray-700 p-2 rounded-xl shadow-lg w-60 divide-y divide-dark-200 dark:divide-gray-600"},we=["onClick"],_e={class:"cursor-pointer"},Ce={class:""},Ie={class:"p-1 w-9 h-9 transition-all lg:hover:animate-wiggle cursor-pointer"},Te={key:0,class:W(["lg:hidden transition-all ease-in-out duration-500"])},Pe={class:"text-primary scale-110 -rotate-6"},$e={key:1,class:"bg-gray-100 dark:bg-gray-700 rounded-lg px-4 py-3 text-sm text-dark-250 dark:text-gray-500 cursor-not-allowed truncate"},Se={class:"px-2 py-2"},je={class:"text-lg text-center font-medium text-gray-900 dark:text-gray-100"},Be={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Me={class:"px-2 pb-2"},Ae=U({__name:"TheInput",props:{quote:null},emits:["update:quote","toQuote","scrollToBottom"],setup(c,{emit:o}){const h=c,d=ie();$t(),f(!1);const y=f(!1),g=f(!1),q=f(!1),T=ce();St();const v=Ee(),x=jt(),e=te(),j=B(()=>w.value.length>0),J=Bt(),mt=r=>{var a,k,m;try{if(r.encryption=="aes"){let b=((a=r.channelId||r.groupId)==null?void 0:a.substring(0,16))||"";switch(r.chatType){case 1:case ve.msg:return zt(r.content,b);case ve.red:return r.content;case ve.img:return`[${d.t("new_msg_img")}]`;default:return""}}else{const b=Ee(),P=r.metaId!==e.selfMetaId?(k=r==null?void 0:r.fromUserInfo)==null?void 0:k.chatPublicKey:(m=r==null?void 0:r.toUserInfo)==null?void 0:m.chatPublicKey;if(!P)return"";let u=b.getEcdh(P);try{const _=u==null?void 0:u.sharedSecret;return _?Ft(r.content,_):""}catch(_){return""}}}catch(b){return""}};B(()=>!(window.innerWidth<=1024)||!j.value);const le=f(null),F=f(null),Y=f(!1),Z=f(!0),ft=B(()=>F.value!==null);B(()=>e.activeChannel);const ht=r=>{var a;J.checkWebViewBridge(),J.isWebView&&De({isNeed:!1}),(a=le.value)==null||a.click(),r()},gt=()=>{g.value=!0},Ke=r=>{g.value=!1,T.selectedRedPacketType=r,T.isShowRedPacketModal=!0},ze=()=>{g.value=!1},xt=r=>{var k;J.checkWebViewBridge(),J.isWebView&&De({isNeed:!0});const a=(k=r.target.files)==null?void 0:k[0];if(a){if(!Ut(a)){x.$patch({error:{type:"image_only",message:"image_only",timestamp:Date.now()}});return}if(Rt(a)){x.$patch({error:{type:"image_too_large",message:"image_too_large",timestamp:Date.now()}});return}F.value=a}},Fe=()=>{F.value=null,le.value.value=""},se=B(()=>F.value?URL.createObjectURL(F.value):""),kt=()=>D(this,null,function*(){var b,P,u,_,X,O;o("scrollToBottom");let r=F.value;Z.value&&(r=yield Vt(F.value));const a=[yield Et(r)];if(((b=e.activeChannel)==null?void 0:b.type)=="private"){if(!((P=e.activeChannel)!=null&&P.publicKeyStr))return re.error(`${d.t("get_ecdh_pubey_error")}`);let C=v.getEcdh((u=e.activeChannel)==null?void 0:u.publicKeyStr);C||(C=yield We(e.activeChannel.publicKeyStr),v.insert(C,C==null?void 0:C.externalPubKey));const ee=C==null?void 0:C.sharedSecret;a[0].data=Dt(a[0].data,ee)}const k=se.value;Fe();const m={type:Wt.Image,channelId:e.activeChannelId,groupId:((_=e.activeChannel)==null?void 0:_.type)=="private"?"":e.activeChannelId||"",userName:(X=bt.last)==null?void 0:X.name,attachments:a,content:"",originalFileUrl:k,channelType:(O=e.activeChannel)==null?void 0:O.type,reply:h.quote};o("update:quote",void 0),yield Lt(m)}),w=f(""),bt=ue();Mt();const K=f(!1),wt=f(null),ne=f(!1),_t=()=>{ne.value=!0},Ct=()=>{ne.value=!1},It=r=>{r.key==="Enter"&&!r.shiftKey&&!ne.value&&(r.preventDefault(),Ue())},oe=B(()=>{if(K.value)return 1;const r=w.value.split(`
`).reduce((a,k)=>a+1,0);return Math.min(Math.max(r,1),10)}),Ue=r=>D(this,null,function*(){var k,m,b,P;if(K.value=!0,w.value=w.value.trim(),!Xt(w.value)){K.value=!1;return}if(q.value){K.value=!1;return}o("scrollToBottom");let a="";if(((k=e.activeChannel)==null?void 0:k.type)==="group"||((m=e.activeChannel)==null?void 0:m.type)==="sub-group")a=Ot(w.value,e.activeChannel.id.substring(0,16));else{if(!((b=e.activeChannel)!=null&&b.publicKeyStr))return K.value=!1,re.error(`${d.t("get_ecdh_pubey_error")}`);let u=v.getEcdh((P=e.activeChannel)==null?void 0:P.publicKeyStr);u||(u=yield We(e.activeChannel.publicKeyStr),u&&v.insert(u,u==null?void 0:u.externalPubKey));const _=u==null?void 0:u.sharedSecret;if(!_)return K.value=!1,re.error("Failed to generate shared secret");a=Qt(w.value,_)}if(w.value="",!e.activeChannel){K.value=!1;return}try{yield e.sendMessage(e.activeChannel.id,a,0,h.quote),h.quote&&o("update:quote",void 0)}catch(u){}K.value=!1});return(r,a)=>{var b,P,u,_,X,O,C,ee;const k=Gt,m=Ve;return s(),p(pe,null,[((b=n(e).activeChannel)==null?void 0:b.type)==="private"||((P=n(e).activeChannel)==null?void 0:P.type)==="group"||((u=n(e).activeChannel)==null?void 0:u.type)==="sub-group"?(s(),p("div",z,[l(" \u56DE\u590D/\u5F15\u7528 "),c.quote?(s(),p("div",G,[t("div",L,[At($(r.$t("Talk.Quote.tips"))+" ",1),t("a",{onClick:a[0]||(a[0]=I=>o("toQuote")),class:"user"},[i(k,{name:c.quote.userInfo?c.quote.userInfo.name:c.quote.fromUserInfo.name,"meta-name":"","no-tag":!0},null,8,["name"])]),t("span",H,":"+$(mt(c.quote)),1)]),i(m,{name:"x_circle",class:"close",onClick:a[1]||(a[1]=I=>o("update:quote",void 0))})])):l("v-if",!0),l(" \u4E0A\u4F20\u56FE\u9884\u89C8 "),n(ft)?(s(),p("div",N,[t("div",V,[t("div",S,[l(" \u538B\u7F29\u6309\u94AE "),t("div",{class:"main-border small bg-white dark:bg-gray-700 p-1.5 cursor-pointer !rounded-lg text-xs flex items-center justify-center gap-x-1",onClick:a[2]||(a[2]=I=>Z.value=!Z.value)},[t("div",E,$(r.$t("Talk.Input.compress")),1),Z.value?(s(),R(m,{key:0,name:"check_bold",class:"w-2.5 h-2.5 inline bg-primary rounded p-0.5 box-content"})):(s(),p("div",me))]),l(" \u5220\u9664\u6309\u94AE "),t("div",{class:"main-border small bg-white dark:bg-gray-700 p-1.5 cursor-pointer !rounded-lg",onClick:Fe},[i(m,{name:"x_mark",class:"w-4 h-4 text-dark-800 dark:text-gray-100"})]),l(" \u53D1\u9001\u6309\u94AE "),t("div",{class:"main-border primary p-1.5 cursor-pointer small !rounded-lg",onClick:kt},[i(m,{name:"send",class:"w-4 h-4 text-dark-800 -rotate-6"})])]),t("img",{src:n(se),class:"w-full h-full object-scale-down cursor-zoom-in",onClick:a[3]||(a[3]=I=>Y.value=!0)},null,8,fe)]),Y.value?(s(),R(de,{key:0,to:"body"},[Y.value?(s(),R(ye,{key:0,src:n(se),onClose:a[4]||(a[4]=I=>Y.value=!1)},null,8,["src"])):l("v-if",!0)])):l("v-if",!0)])):l("v-if",!0),t("div",{class:W([n(oe)>1?"items-start":"items-center","flex h-fit"])},[l(` <Popover class="relative flex items-center" v-slot="{ open }">
        <PopoverButton
          as="button"
          class="w-14 flex items-center py-2 justify-center text-dark-800 dark:text-gray-100 outline-0"
        >
          <div
            class="bg-primary w-8 h-8 flex items-center justify-center rounded-full cursor-pointer"
          >
            <Icon
              name="plus_2"
              :class="[open && 'rotate-45', 'w-3 h-3 text-dark-800 transition duration-200']"
            />
          </div>
        </PopoverButton>

        <transition
          enter-active-class="transition duration-200 ease-out"
          enter-from-class="opacity-0"
          enter-to-class="opacity-100"
          leave-active-class="transition duration-150 ease-in"
          leave-from-class="opacity-100"
          leave-to-class="opacity-0"
        >
          <PopoverPanel
            class="absolute z-10 transform top-[-16PX] left-0 -translate-y-full"
            v-slot="{ close }"
          >
            <div
              class="bg-white dark:bg-gray-700 dark:text-gray-100 py-2 px-4 rounded-xl flex flex-col w-max justify-stretch divide-dark-100 dark:divide-gray-800 divide-y divide-solid"
            >
              <button
                class="flex py-4 outline-none hover:bg-gray-100 dark:hover:bg-gray-800 px-4 -mx-4 space-x-3 items-center"
                type="button"
                v-for="command in moreCommands()"
                :key="command.titleKey"
                @click="command.action(close)"
              >
                <Icon
                  :name="command.icon"
                  class="w-6 h-6 text-dark-800 rounded-full bg-primary box-content p-1.5 shrink-0"
                />

                <div class="flex flex-col justify-start items-start">
                  <h4 class="shrink-0 text-sm">{{ $t(command.titleKey) }}</h4>
                  <p class="text-xs text-dark-300 dark:text-gray-400">
                    {{ $t(command.descriptionKey) }}
                  </p>
                </div>
              </button>
            </div>
          </PopoverPanel>
        </transition>
      </Popover> `),l(` <button
        class="w-14 flex items-center py-2 justify-center text-dark-800 dark:text-gray-100"
        type="button"
        @click="showMoreCommandsBox = true"
      >
        <div
          class="bg-primary w-8 h-8 flex items-center justify-center rounded-full cursor-pointer"
        >
          <Icon name="plus_2" class="w-3 h-3 text-dark-800 dark:text-gray-100" />
        </div>
      </button> `),t("div",he,[qt(t("textarea",{class:W(["w-full !outline-none placeholder:text-dark-250 placeholder:dark:text-gray-400 placeholder:text-sm placeholder:truncate text-dark-800 dark:text-gray-100 text-base caret-gray-600 dark:caret-gray-400 resize-none !h-fit text-base rounded-md transition-all duration-150 delay-100",n(oe)>1?"bg-gray-100 dark:bg-gray-800 p-1 -m-1":"bg-inherit"]),rows:n(oe),ref_key:"theTextBox",ref:wt,placeholder:r.$t("Talk.Channel.message_to",{channel:(((_=n(e).activeChannel)==null?void 0:_.type)==="group"||((X=n(e).activeChannel)==null?void 0:X.type)==="sub-group"?"#":"@")+(((O=n(e).activeChannel)==null?void 0:O.name)||"")}),"onUpdate:modelValue":a[5]||(a[5]=I=>w.value=I),onKeydown:It,onCompositionstart:_t,onCompositionend:Ct},null,42,ge),[[Kt,w.value]])]),(s(),R(de,{to:"body"},[t("input",{type:"file",id:"imageUploader",ref_key:"imageUploader",ref:le,accept:"image/*",onChange:xt,class:"hidden"},null,544)])),l(" \u53F3\u4FA7\u6309\u94AE\u7FA4 "),t("div",xe,[t("div",{class:W([n(j)?"hidden lg:flex":"flex","items-center px-1 mr-2"])},[(((C=n(e).activeChannel)==null?void 0:C.type)==="group"||((ee=n(e).activeChannel)==null?void 0:ee.type)==="sub-group")&&!c.quote?(s(),p("div",{key:0,class:"p-2 w-9 h-9 transition-all lg:hover:animate-wiggle cursor-pointer",onClick:gt},[i(m,{name:"red_envelope",class:"w-full h-full text-dark-800 dark:text-gray-100"})])):l("v-if",!0),i(n(pa),{class:"relative flex items-center"},{default:M(()=>[i(n(ua),{as:"div"},{default:M(()=>[t("div",ke,[i(m,{name:"photo_3",class:"w-full h-full text-dark-800 dark:text-gray-100"})])]),_:1}),i(ae,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[i(n(da),{class:"absolute z-10 transform top-[-16PX] right-0 -translate-y-full"},{default:M(({close:I})=>[t("div",be,[t("div",{class:"mx-2 py-4 flex items-center space-x-2 text-dark-800 dark:text-gray-100 rounded-sm lg:cursor-pointer lg:hover:underline cursor-pointer",onClick:ma=>ht(I)},[t("div",_e,[i(m,{name:"photo",class:"w-5 h-5 rounded-full bg-primary p-2 box-content"})]),t("div",Ce,$(r.$t("Talk.Channel.upload_image")),1)],8,we),l(` <div
                    class="mx-2 py-4 flex items-center space-x-2 text-dark-800 dark:text-gray-100 rounded-sm lg:cursor-pointer lg:hover:underline cursor-pointer"
                  >
                    <div class=" ">
                      <Icon name="link" class="w-5 h-5 rounded-full bg-primary p-2 box-content" />
                    </div>
                    <div class="">
                      {{ $t('Talk.Channel.use_onchain_image') }}
                    </div>
                  </div> `)])]),_:1})]),_:1})]),_:1}),i(n(ia),{placement:"bottom-start",width:"300px",trigger:"click"},{reference:M(()=>[t("div",Ie,[i(m,{name:"face_smile",class:W(["w-full h-full text-dark-800 dark:text-gray-100 transition-all ease-in-out duration-300",{"text-primary -rotate-6 scale-110":y.value}])},null,8,["class"])])]),default:M(()=>[i(na,{onInput:a[6]||(a[6]=I=>w.value=w.value+I.value)})]),_:1})],2),l(" \u53D1\u9001\u6309\u94AE "),i(ae,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100"},{default:M(()=>[n(j)?(s(),p("div",Te,[t("div",{class:"py-2 px-3",onClick:Ue},[l(` <div
              class="transition-all ease-in-out duration-500"
              :class="[
                hasInput ? 'text-primary scale-110 -rotate-6' : 'text-dark-250 dark:text-gray-400',
              ]"
            >
              <Icon name="send" class="w-5 h-5" />
            </div> `),t("div",Pe,[i(m,{name:"send",class:"w-5 h-5"})])])])):l("v-if",!0)]),_:1})])],2)])):(s(),p("div",$e,$(r.$t("Talk.Input.dont_have_permission")),1)),l(" Apple Style Action Sheet "),(s(),R(de,{to:"body"},[i(ae,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[g.value?(s(),p("div",{key:0,class:"fixed inset-0 z-50 flex items-end justify-center bg-black bg-opacity-50 md:items-center",onClick:ze},[i(ae,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform translate-y-full opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform translate-y-full opacity-0"},{default:M(()=>[g.value?(s(),p("div",{key:0,class:"w-full max-w-xs sm:max-w-xs md:w-96 bg-white dark:bg-gray-800 rounded-t-xl shadow-xl transform md:rounded-xl",onClick:a[9]||(a[9]=Re(()=>{},["stop"]))},[l(" Options "),t("div",Se,[l(" MVC Red Packet "),t("button",{onClick:a[7]||(a[7]=I=>Ke("mvc")),class:"w-full flex items-center px-4 py-4 justify-center hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-colors duration-200 active:scale-95"},[t("h4",je," SPACE "+$(r.$t("Talk.Modals.red_packet")),1)]),l(" BTC Red Packet "),t("button",{onClick:a[8]||(a[8]=I=>Ke("btc")),class:"w-full flex text-center items-center px-4 py-4 justify-center hover:bg-gray-50 dark:hover:bg-gray-700 rounded-t-xl transition-colors duration-200 active:scale-95"},[t("h4",Be," BTC "+$(r.$t("Talk.Modals.red_packet")),1)])]),l(" Cancel Button "),t("div",Me,[t("button",{onClick:ze,class:"w-full py-4 text-center text-gray-600 dark:text-gray-400 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-colors duration-200 active:scale-95"},$(r.$t("cancel")),1)])])):l("v-if",!0)]),_:1})])):l("v-if",!0)]),_:1})]))],64)}}});const Ge=Le(Ae,[["__scopeId","data-v-f0f1ef11"]]),He={class:"bg-white flex items-center justify-center dark:bg-gray-700 w-full py-[20px]"},Ne={class:"font-lg text-[#FC4F60]"},Je=U({__name:"MuteInput",setup(c){return ie(),(o,h)=>(s(),p("div",He,[t("span",Ne,$(o.$t("Mute")),1)]))}}),Ye={class:"h-6"},Ze=U({__name:"TheErrorBox",setup(c){const o=f(!1);return(h,d)=>(s(),p("div",Ye,[t("div",{class:W(["font-medium text-xs pt-0.5 transition-all duration-300 ease-out",[o.value?"text-rose-500":"invisible"]])},[l(" {{ $t('Talk.Errors.' + talkStore.error.type, $t('Talk.Errors.default')) }} ")],2)]))}}),et={class:"font-lg text-[#FC4F60]"},tt=U({__name:"JoinInput",setup(c){const o=ce(),h=ue(),d=Ht();Xe();const y=ie(),{openConnectionModal:g,closeConnectionModal:q,setMissingWallet:T}=Nt(),v=()=>{o[Oe.isShowChannelAcceptInviteModal]=!1,g()},x=()=>D(this,null,function*(){try{if(!h.isAuthorized)return v();const e=te();o[Oe.isShowChannelAcceptInviteModal]=!1,o.isShowLoading=!0;const j=yield Jt(e.activeChannelId);if(o.isShowLoading=!1,j.status==="failed"){d.push("/");return}yield Yt(1e3),e.isInitialized||(yield e.init()),e.convertTemporaryToRegular(e.activeChannelId),yield e.syncFromServer()}catch(e){o.isShowLoading=!1,re.error(`${e.toString()}! ${y.t("retry_join")}`)}});return(e,j)=>(s(),p("div",{class:"bg-white flex items-center justify-center dark:bg-gray-700 w-full py-[20px]",onClick:x},[t("span",et,$(e.$t("Join")),1)]))}}),at={class:"h-full pb-17.5 lg:pb-20"},rt={class:"fixed bottom-0 left-0 right-0 px-4 lg:absolute"},lt={key:0,class:"fixed bottom-0 left-0 right-0 lg:absolute"},st={key:1,class:"fixed bottom-0 left-0 right-0 lg:absolute"},nt=U({__name:"ChannelContent",setup(c){const o=Zt({val:void 0}),h=ea({loader:()=>aa(()=>import("./MessageList.810915de.js").then(v=>D(this,null,function*(){return yield v.__tla,v})),["MessageList.810915de.js","index.02fc6cc9.js","index.16048726.css","Publish.e9f8ac4b.js","modals.ca72ea17.js","index.7debbede.js","modals.1cd2d636.css","Card.bc476c2b.css","Sticker.a2ddf828.js","Sticker.91d28555.css","Publish.6dd558a8.css","popover.bf3e6abc.js","MessageList.79db716e.css"])}),d=f(),y=te();function g(){d.value.scrollToTimeStamp(o.val.timestamp)}function q(){var v;(v=d.value)==null||v.scrollToMessagesBottom()}const T=B(()=>{var v,x,e;if(((v=y.activeChannel)==null?void 0:v.type)==="sub-group"){const j=y.getCurrentUserRoleInGroup(y.activeChannel.parentGroupId);return j.isAdmin||j.isCreator||j.isWhitelist?"allowed":"forbidden"}else return((x=y.activeChannel)==null?void 0:x.type)==="group"?y.activeChannel.isTemporary?"join":"allowed":(e=y.activeChannel)!=null&&e.publicKeyStr?"allowed":"forbidden"});return ta("Reply",o),(v,x)=>(s(),p(pe,null,[t("div",at,[i(n(h),{onQuote:x[0]||(x[0]=e=>o.val=e),ref_key:"MessageListRef",ref:d},null,512)]),t("div",rt,[n(T)==="allowed"?(s(),R(Ge,{key:0,quote:o.val,"onUpdate:quote":x[1]||(x[1]=e=>o.val=e),onToQuote:g,onScrollToBottom:q},null,8,["quote"])):l("v-if",!0),i(Ze)]),n(T)==="forbidden"?(s(),p("div",lt,[i(Je)])):l("v-if",!0),n(T)==="join"?(s(),p("div",st,[i(tt)])):l("v-if",!0)],64))}}),ot="/chat/welcome.864ee172.png",it=c=>(ra("data-v-2ebbbabf"),c=c(),la(),c),ct={key:0},ut={key:0,class:"mt-20 px-1 flex text-center items-center justify-center flex-col"},dt={class:""},pt=["src"],vt=it(()=>t("div",{class:"text-2xl welcome-desc text-[#AAAAAA] mt-3 flex items-center justify-center"},[t("span",null," A Decentralized Messaging App Built on Bitcoin ")],-1)),yt=U({__name:"ChannelBody",setup(c){ce();const o=ue(),h=Xe(),d=te(),{communityId:y,channelId:g}=h.params,q=B(()=>g=="welcome"),T=B(()=>{if(!o.isAuthorized)return!0;if(d.isInitialized){const v=d.activeChannelMessages.length>0;return!d.activeChannel||!v}return!1});return(v,x)=>(s(),p(pe,null,[l(` <ChannelWelcome v-if="talk.isActiveChannelTheVoid" />
  <ChannelSettings v-else-if="talk.isActiveChannelTheVoid" /> `),n(q)?(s(),p("div",ct,[n(T)?(s(),p("div",ut,[t("div",dt,[l(' <Icon name="welcome_icon" class="w-[140px] h-[38px]"></Icon> '),t("img",{src:n(ot),class:"w-[140px] h-[38px]",alt:""},null,8,pt)]),vt])):l("v-if",!0)])):(s(),R(nt,{key:1}))],2112))}});let qe;qe=Le(yt,[["__scopeId","data-v-2ebbbabf"]]),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}))}));export{Qe as C,ye as _,ya as __tla};
