(self["webpackChunk"] = self["webpackChunk"] || []).push([[6798],{

/***/ 96000:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Z: function() { return /* binding */ icons_FileImageFilled; }
});

// EXTERNAL MODULE: ./node_modules/.pnpm/@babel+runtime@7.25.7/node_modules/@babel/runtime/helpers/esm/extends.js
var esm_extends = __webpack_require__(35453);
// EXTERNAL MODULE: ./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js
var react = __webpack_require__(75271);
;// CONCATENATED MODULE: ./node_modules/.pnpm/@ant-design+icons-svg@4.4.2/node_modules/@ant-design/icons-svg/es/asn/FileImageFilled.js
// This icon file is generated automatically.
var FileImageFilled = { "icon": { "tag": "svg", "attrs": { "viewBox": "64 64 896 896", "focusable": "false" }, "children": [{ "tag": "path", "attrs": { "d": "M854.6 288.7L639.4 73.4c-6-6-14.2-9.4-22.7-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.6-9.4-22.6zM400 402c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm296 294H328c-6.7 0-10.4-7.7-6.3-12.9l99.8-127.2a8 8 0 0112.6 0l41.1 52.4 77.8-99.2a8 8 0 0112.6 0l136.5 174c4.3 5.2.5 12.9-6.1 12.9zm-94-370V137.8L790.2 326H602z" } }] }, "name": "file-image", "theme": "filled" };
/* harmony default export */ var asn_FileImageFilled = (FileImageFilled);

// EXTERNAL MODULE: ./node_modules/.pnpm/@ant-design+icons@5.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ant-design/icons/es/components/AntdIcon.js
var AntdIcon = __webpack_require__(11256);
;// CONCATENATED MODULE: ./node_modules/.pnpm/@ant-design+icons@5.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ant-design/icons/es/icons/FileImageFilled.js

// GENERATE BY ./scripts/generate.ts
// DON NOT EDIT IT MANUALLY




var FileImageFilled_FileImageFilled = function FileImageFilled(props, ref) {
  return /*#__PURE__*/react.createElement(AntdIcon/* default */.Z, (0,esm_extends/* default */.Z)({}, props, {
    ref: ref,
    icon: asn_FileImageFilled
  }));
};

/**![file-image](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg1NC42IDI4OC43TDYzOS40IDczLjRjLTYtNi0xNC4yLTkuNC0yMi43LTkuNEgxOTJjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjgzMmMwIDE3LjcgMTQuMyAzMiAzMiAzMmg2NDBjMTcuNyAwIDMyLTE0LjMgMzItMzJWMzExLjNjMC04LjUtMy40LTE2LjYtOS40LTIyLjZ6TTQwMCA0MDJjMjIuMSAwIDQwIDE3LjkgNDAgNDBzLTE3LjkgNDAtNDAgNDAtNDAtMTcuOS00MC00MCAxNy45LTQwIDQwLTQwem0yOTYgMjk0SDMyOGMtNi43IDAtMTAuNC03LjctNi4zLTEyLjlsOTkuOC0xMjcuMmE4IDggMCAwMTEyLjYgMGw0MS4xIDUyLjQgNzcuOC05OS4yYTggOCAwIDAxMTIuNiAwbDEzNi41IDE3NGM0LjMgNS4yLjUgMTIuOS02LjEgMTIuOXptLTk0LTM3MFYxMzcuOEw3OTAuMiAzMjZINjAyeiIgLz48L3N2Zz4=) */
var RefIcon = /*#__PURE__*/react.forwardRef(FileImageFilled_FileImageFilled);
if (false) {}
/* harmony default export */ var icons_FileImageFilled = (RefIcon);

/***/ }),

/***/ 78559:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75271);
/* harmony import */ var umi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12798);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(52676);




/* harmony default export */ __webpack_exports__.Z = (function (_ref) {
  var children = _ref.children;
  var _useIntl = (0,umi__WEBPACK_IMPORTED_MODULE_1__.useIntl)(),
    formatMessage = _useIntl.formatMessage;
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
    children: formatMessage({
      id: children
    })
  });
});

/***/ }),

/***/ 59002:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": function() { return /* binding */ setting; }
});

// EXTERNAL MODULE: ./node_modules/.pnpm/@babel+runtime@7.23.6/node_modules/@babel/runtime/helpers/regeneratorRuntime.js
var regeneratorRuntime = __webpack_require__(90228);
var regeneratorRuntime_default = /*#__PURE__*/__webpack_require__.n(regeneratorRuntime);
// EXTERNAL MODULE: ./node_modules/.pnpm/@babel+runtime@7.23.6/node_modules/@babel/runtime/helpers/objectSpread2.js
var objectSpread2 = __webpack_require__(26068);
var objectSpread2_default = /*#__PURE__*/__webpack_require__.n(objectSpread2);
// EXTERNAL MODULE: ./node_modules/.pnpm/@babel+runtime@7.23.6/node_modules/@babel/runtime/helpers/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(87999);
var asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator);
// EXTERNAL MODULE: ./node_modules/.pnpm/@babel+runtime@7.23.6/node_modules/@babel/runtime/helpers/slicedToArray.js
var slicedToArray = __webpack_require__(48305);
var slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray);
// EXTERNAL MODULE: ./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js
var react = __webpack_require__(75271);
// EXTERNAL MODULE: ./node_modules/.pnpm/antd@5.21.4_moment@2.30.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/antd/es/message/index.js + 4 modules
var message = __webpack_require__(16598);
// EXTERNAL MODULE: ./node_modules/.pnpm/antd@5.21.4_moment@2.30.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/antd/es/theme/index.js + 6 modules
var theme = __webpack_require__(4390);
// EXTERNAL MODULE: ./node_modules/.pnpm/antd@5.21.4_moment@2.30.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/antd/es/upload/index.js + 11 modules
var upload = __webpack_require__(40681);
// EXTERNAL MODULE: ./node_modules/.pnpm/antd@5.21.4_moment@2.30.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/antd/es/button/index.js + 9 modules
var es_button = __webpack_require__(23674);
// EXTERNAL MODULE: ./node_modules/.pnpm/@ant-design+icons@5.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ant-design/icons/es/icons/PlusOutlined.js + 1 modules
var PlusOutlined = __webpack_require__(89999);
// EXTERNAL MODULE: ./node_modules/.pnpm/@ant-design+icons@5.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ant-design/icons/es/icons/FileImageFilled.js + 1 modules
var FileImageFilled = __webpack_require__(96000);
// EXTERNAL MODULE: ./src/.umi-production/exports.ts + 26 modules
var _umi_production_exports = __webpack_require__(12798);
// EXTERNAL MODULE: ./src/Components/Trans/index.tsx
var Trans = __webpack_require__(78559);
// EXTERNAL MODULE: ./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(52676);
;// CONCATENATED MODULE: ./src/Components/ProfileCard/UploadAvatar.tsx










var getBase64 = function getBase64(img, callback) {
  var reader = new FileReader();
  reader.addEventListener('load', function () {
    return callback(reader.result);
  });
  reader.readAsDataURL(img);
};
var beforeUpload = function beforeUpload(file) {
  var isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';
  if (!isJpgOrPng) {
    message/* default */.ZP.error('You can only upload JPG/PNG file!');
  }
  var isLt300k = file.size / 1024 / 1024 < 0.3;
  if (!isLt300k) {
    message/* default */.ZP.error("file must smaller than 300k!");
    return false;
  }
  return isJpgOrPng && isLt300k;
};
var UploadAvatar = function UploadAvatar(props) {
  var _theme$useToken = theme/* default */.Z.useToken(),
    colorText = _theme$useToken.token.colorText;
  var _useModel = (0,_umi_production_exports.useModel)('user'),
    user = _useModel.user;
  var _useState = (0,react.useState)(props.value),
    _useState2 = slicedToArray_default()(_useState, 2),
    imageUrl = _useState2[0],
    setImageUrl = _useState2[1];
  var _useState3 = (0,react.useState)(false),
    _useState4 = slicedToArray_default()(_useState3, 2),
    loading = _useState4[0],
    setLoading = _useState4[1];
  (0,react.useEffect)(function () {
    if (props.value && typeof props.value === 'string' && props.value.indexOf('http') === 0) {
      setImageUrl(props.value);
    }
  }, [props.value]);
  var handleChange = function handleChange(info) {
    if (info.file.status === 'uploading') {
      setLoading(true);
      return;
    }
    if (info.file.status === 'done') {
      // Get this url from response in real world.
      getBase64(info.file.originFileObj, function (url) {
        setLoading(false);
        setImageUrl(url);
        if (props.onChange) {
          props.onChange(info.file.originFileObj);
        }
      });
    }
  };
  var uploadButton = /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
    style: {
      border: 0,
      background: 'none',
      color: colorText
    },
    type: "button",
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(PlusOutlined/* default */.Z, {}), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        marginTop: 8
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Trans/* default */.Z, {
        children: "Upload"
      })
    })]
  });
  var handleUpload = /*#__PURE__*/function () {
    var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regeneratorRuntime_default()().mark(function _callee(_ref) {
      var file, onSuccess, onError;
      return regeneratorRuntime_default()().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            file = _ref.file, onSuccess = _ref.onSuccess, onError = _ref.onError;
            onSuccess();
          case 2:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function handleUpload(_x) {
      return _ref2.apply(this, arguments);
    };
  }();
  return /*#__PURE__*/(0,jsx_runtime.jsx)(upload/* default */.Z, {
    beforeUpload: beforeUpload,
    onChange: handleChange,
    name: "avatar",
    listType: props.listType || "picture-circle",
    className: "avatar-uploader",
    showUploadList: false,
    style: {
      overflow: 'hidden'
    },
    customRequest: handleUpload,
    children: imageUrl ? /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        position: 'relative',
        width: 100,
        height: 100
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("img", {
        src: imageUrl,
        alt: "avatar",
        style: {
          width: 100,
          height: 100,
          objectFit: 'cover',
          borderRadius: '50%',
          overflow: 'hidden'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.ZP, {
        style: {
          position: 'absolute',
          top: '50%',
          left: '50%',
          transform: 'translate(-50%,-50%)'
        },
        shape: "circle",
        type: "link",
        icon: /*#__PURE__*/(0,jsx_runtime.jsx)(FileImageFilled/* default */.Z, {})
      })]
    }) : uploadButton
  });
};
/* harmony default export */ var ProfileCard_UploadAvatar = (UploadAvatar);
;// CONCATENATED MODULE: ./src/Components/ProfileCard/index.less
// extracted by mini-css-extract-plugin

;// CONCATENATED MODULE: ./src/Components/ProfileCard/UploadBackground.tsx











var UploadBackground_getBase64 = function getBase64(img, callback) {
  var reader = new FileReader();
  reader.addEventListener('load', function () {
    return callback(reader.result);
  });
  reader.readAsDataURL(img);
};
var UploadBackground_beforeUpload = function beforeUpload(file) {
  var isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';
  if (!isJpgOrPng) {
    message/* default */.ZP.error('You can only upload JPG/PNG file!');
  }
  var isLt300k = file.size / 1024 / 1024 < 0.3;
  if (!isLt300k) {
    message/* default */.ZP.error("file must smaller than 300k!");
    return false;
  }
  return isJpgOrPng && isLt300k;
};
var UploadBackground = function UploadBackground(props) {
  var _theme$useToken = theme/* default */.Z.useToken(),
    colorText = _theme$useToken.token.colorText;
  var _useModel = (0,_umi_production_exports.useModel)('user'),
    user = _useModel.user;
  var _useState = (0,react.useState)(props.value),
    _useState2 = slicedToArray_default()(_useState, 2),
    imageUrl = _useState2[0],
    setImageUrl = _useState2[1];
  var _useState3 = (0,react.useState)(false),
    _useState4 = slicedToArray_default()(_useState3, 2),
    loading = _useState4[0],
    setLoading = _useState4[1];
  (0,react.useEffect)(function () {
    if (props.value && typeof props.value === 'string' && props.value.indexOf('http') === 0) {
      setImageUrl(props.value);
    }
  }, [props.value]);
  var handleChange = function handleChange(info) {
    if (info.file.status === 'uploading') {
      setLoading(true);
      return;
    }
    if (info.file.status === 'done') {
      // Get this url from response in real world.
      UploadBackground_getBase64(info.file.originFileObj, function (url) {
        setLoading(false);
        setImageUrl(url);
        if (props.onChange) {
          props.onChange(info.file.originFileObj);
        }
      });
    }
  };
  var uploadButton = /*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.ZP, {
    block: true,
    icon: /*#__PURE__*/(0,jsx_runtime.jsx)(PlusOutlined/* default */.Z, {}),
    style: {
      display: 'flex',
      justifyContent: 'center',
      alignItems: 'center',
      width: '100%',
      height: '240px',
      border: 'none'
    },
    type: "text",
    children: /*#__PURE__*/(0,jsx_runtime.jsx)(Trans/* default */.Z, {
      children: "Upload"
    })
  });
  var handleUpload = /*#__PURE__*/function () {
    var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regeneratorRuntime_default()().mark(function _callee(_ref) {
      var file, onSuccess, onError;
      return regeneratorRuntime_default()().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            file = _ref.file, onSuccess = _ref.onSuccess, onError = _ref.onError;
            onSuccess();
          case 2:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function handleUpload(_x) {
      return _ref2.apply(this, arguments);
    };
  }();
  return /*#__PURE__*/(0,jsx_runtime.jsx)(upload/* default */.Z.Dragger, {
    beforeUpload: UploadBackground_beforeUpload,
    onChange: handleChange,
    showUploadList: false,
    customRequest: handleUpload,
    style: {
      width: '100%',
      height: 240,
      padding: 0,
      boxSizing: 'border-box',
      overflow: 'hidden'
    },
    className: "setting-background-uploader",
    children: imageUrl ? /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        position: 'relative',
        width: '100%',
        height: 240,
        overflow: 'hidden',
        borderRadius: 8
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("img", {
        src: imageUrl,
        alt: "avatar",
        style: {
          width: '100%',
          height: 240,
          objectFit: 'cover',
          borderRadius: 8,
          overflow: 'hidden'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.ZP, {
        style: {
          position: 'absolute',
          top: '50%',
          left: '50%',
          transform: 'translate(-50%,-50%)'
        },
        shape: "circle",
        type: "text",
        icon: /*#__PURE__*/(0,jsx_runtime.jsx)(FileImageFilled/* default */.Z, {})
      })]
    }) : uploadButton
  });
};
/* harmony default export */ var ProfileCard_UploadBackground = (UploadBackground);
// EXTERNAL MODULE: ./src/config/index.ts
var config = __webpack_require__(45611);
// EXTERNAL MODULE: ./src/request/api.ts
var api = __webpack_require__(72948);
// EXTERNAL MODULE: ./src/utils/file.ts
var file = __webpack_require__(88271);
// EXTERNAL MODULE: ./node_modules/.pnpm/@tanstack+react-query@5.59.16_react@18.3.1/node_modules/@tanstack/react-query/build/modern/useQuery.js
var useQuery = __webpack_require__(77682);
// EXTERNAL MODULE: ./node_modules/.pnpm/antd@5.21.4_moment@2.30.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/antd/es/form/index.js + 21 modules
var es_form = __webpack_require__(31571);
// EXTERNAL MODULE: ./node_modules/.pnpm/antd@5.21.4_moment@2.30.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/antd/es/card/index.js + 4 modules
var card = __webpack_require__(26061);
// EXTERNAL MODULE: ./node_modules/.pnpm/antd@5.21.4_moment@2.30.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/antd/es/input/index.js + 6 modules
var input = __webpack_require__(1092);
;// CONCATENATED MODULE: ./src/pages/setting/index.tsx
/* provided dependency */ var Buffer = __webpack_require__(36379)["Buffer"];
















var normFile = function normFile(e) {
  if (Array.isArray(e)) {
    return e;
  }
  return e === null || e === void 0 ? void 0 : e.fileList;
};
/* harmony default export */ var setting = (function () {
  var _useModel = (0,_umi_production_exports.useModel)('dashboard'),
    showConf = _useModel.showConf;
  var _useModel2 = (0,_umi_production_exports.useModel)('user'),
    user = _useModel2.user,
    btcConnector = _useModel2.btcConnector,
    mvcConnector = _useModel2.mvcConnector,
    chain = _useModel2.chain,
    feeRate = _useModel2.feeRate,
    fetchUserInfo = _useModel2.fetchUserInfo;
  var _useState = (0,react.useState)(false),
    _useState2 = slicedToArray_default()(_useState, 2),
    submitting = _useState2[0],
    setSubmitting = _useState2[1];
  var _Form$useForm = es_form/* default */.Z.useForm(),
    _Form$useForm2 = slicedToArray_default()(_Form$useForm, 1),
    form = _Form$useForm2[0];
  var connector = chain === 'btc' ? btcConnector : mvcConnector;
  var profileUserData = (0,useQuery/* useQuery */.a)({
    queryKey: ['userInfo', user.address],
    enabled: Boolean(user.address && connector),
    queryFn: function queryFn() {
      return (0,api/* getUserInfo */.bG)({
        address: user.address
      });
    }
  });
  (0,react.useEffect)(function () {
    var _profileUserData$data, _profileUserData$data2, _profileUserData$data3, _profileUserData$data4, _profileUserData$data5;
    form.setFieldsValue({
      name: (_profileUserData$data = profileUserData.data) === null || _profileUserData$data === void 0 ? void 0 : _profileUserData$data.name,
      avatar: (_profileUserData$data2 = profileUserData.data) !== null && _profileUserData$data2 !== void 0 && _profileUserData$data2.avatar ? "".concat(config/* BASE_MAN_URL */.yC).concat((_profileUserData$data3 = profileUserData.data) === null || _profileUserData$data3 === void 0 ? void 0 : _profileUserData$data3.avatar) : '',
      background: (_profileUserData$data4 = profileUserData.data) !== null && _profileUserData$data4 !== void 0 && _profileUserData$data4.background ? "".concat(config/* BASE_MAN_URL */.yC).concat((_profileUserData$data5 = profileUserData.data) === null || _profileUserData$data5 === void 0 ? void 0 : _profileUserData$data5.background) : ''
    });
  }, [profileUserData.data]);
  var updateUser = /*#__PURE__*/function () {
    var _ref = asyncToGenerator_default()( /*#__PURE__*/regeneratorRuntime_default()().mark(function _callee() {
      var values, _yield$image2Attach, _yield$image2Attach2, image, _yield$image2Attach3, _yield$image2Attach4, _image, connector, res, avatarRes, backgroundRes, nameRes, _nameRes$status, _avatarRes$status, _backgroundRes$status, nameStatus, avatarStatus, backgroundStatus, _res, _avatarRes, _backgroundRes, _nameRes, _nameRes$status2, _avatarRes$status2, _backgroundRes$status2, _nameStatus, _avatarStatus, _backgroundStatus;
      return regeneratorRuntime_default()().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            values = form.getFieldsValue();
            setSubmitting(true);
            if (!(typeof values.avatar !== 'string')) {
              _context.next = 11;
              break;
            }
            _context.next = 5;
            return (0,file/* image2Attach */.V6)([values.avatar]);
          case 5:
            _yield$image2Attach = _context.sent;
            _yield$image2Attach2 = slicedToArray_default()(_yield$image2Attach, 1);
            image = _yield$image2Attach2[0];
            values.avatar = Buffer.from(image.data, "hex").toString("base64");
            _context.next = 12;
            break;
          case 11:
            delete values.avatar;
          case 12:
            if (!(typeof values.background !== 'string')) {
              _context.next = 21;
              break;
            }
            _context.next = 15;
            return (0,file/* image2Attach */.V6)([values.background]);
          case 15:
            _yield$image2Attach3 = _context.sent;
            _yield$image2Attach4 = slicedToArray_default()(_yield$image2Attach3, 1);
            _image = _yield$image2Attach4[0];
            values.background = Buffer.from(_image.data, "hex").toString("base64");
            _context.next = 22;
            break;
          case 21:
            delete values.background;
          case 22:
            connector = chain === 'btc' ? btcConnector : mvcConnector;
            _context.prev = 23;
            if (!user.name) {
              _context.next = 31;
              break;
            }
            _context.next = 27;
            return connector.updateUserInfo({
              userData: objectSpread2_default()({}, values),
              options: {
                feeRate: Number(feeRate),
                network: config/* curNetwork */.eM
              }
            })["catch"](function (e) {
              throw new Error(e);
            });
          case 27:
            res = _context.sent;
            if (!res) {
              message/* default */.ZP.error('Update Failed');
            } else {
              avatarRes = res.avatarRes, backgroundRes = res.backgroundRes, nameRes = res.nameRes;
              if (avatarRes || backgroundRes || nameRes) {
                nameStatus = (_nameRes$status = nameRes === null || nameRes === void 0 ? void 0 : nameRes.status) !== null && _nameRes$status !== void 0 ? _nameRes$status : '';
                avatarStatus = (_avatarRes$status = avatarRes === null || avatarRes === void 0 ? void 0 : avatarRes.status) !== null && _avatarRes$status !== void 0 ? _avatarRes$status : '';
                backgroundStatus = (_backgroundRes$status = backgroundRes === null || backgroundRes === void 0 ? void 0 : backgroundRes.status) !== null && _backgroundRes$status !== void 0 ? _backgroundRes$status : '';
                if (!nameStatus && !avatarStatus && !backgroundStatus) {
                  message/* default */.ZP.success('Update Successfully');
                } else {
                  message/* default */.ZP.error('User Canceled');
                }
              }
            }
            _context.next = 35;
            break;
          case 31:
            _context.next = 33;
            return connector.createUserInfo({
              userData: values,
              options: {
                feeRate: Number(feeRate),
                network: config/* curNetwork */.eM
              }
            })["catch"](function (e) {
              throw new Error(e);
            });
          case 33:
            _res = _context.sent;
            if (!_res) {
              message/* default */.ZP.error('Create Failed');
            } else {
              _avatarRes = _res.avatarRes, _backgroundRes = _res.backgroundRes, _nameRes = _res.nameRes;
              if (_avatarRes || _backgroundRes || _nameRes) {
                _nameStatus = (_nameRes$status2 = _nameRes === null || _nameRes === void 0 ? void 0 : _nameRes.status) !== null && _nameRes$status2 !== void 0 ? _nameRes$status2 : '';
                _avatarStatus = (_avatarRes$status2 = _avatarRes === null || _avatarRes === void 0 ? void 0 : _avatarRes.status) !== null && _avatarRes$status2 !== void 0 ? _avatarRes$status2 : '';
                _backgroundStatus = (_backgroundRes$status2 = _backgroundRes === null || _backgroundRes === void 0 ? void 0 : _backgroundRes.status) !== null && _backgroundRes$status2 !== void 0 ? _backgroundRes$status2 : '';
                if (!_nameStatus && !_avatarStatus && !_backgroundStatus) {
                  message/* default */.ZP.success('Create Successfully');
                } else {
                  message/* default */.ZP.error('User Canceled');
                }
              }
            }
          case 35:
            fetchUserInfo();
            _context.next = 42;
            break;
          case 38:
            _context.prev = 38;
            _context.t0 = _context["catch"](23);
            console.log(_context.t0, 'error');
            message/* default */.ZP.error(_context.t0.message);
          case 42:
            setSubmitting(false);
          case 43:
          case "end":
            return _context.stop();
        }
      }, _callee, null, [[23, 38]]);
    }));
    return function updateUser() {
      return _ref.apply(this, arguments);
    };
  }();
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.ZP, {
      shape: "round",
      style: {
        color: showConf === null || showConf === void 0 ? void 0 : showConf.colorButton,
        background: showConf === null || showConf === void 0 ? void 0 : showConf.gradientColor
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(Trans/* default */.Z, {
        children: "Account"
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsx)(card/* default */.Z, {
      title: /*#__PURE__*/(0,jsx_runtime.jsx)(Trans/* default */.Z, {
        children: "Personal data"
      }),
      style: {
        marginTop: 12
      },
      bordered: false,
      extra: /*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.ZP, {
        shape: "round",
        type: "primary",
        style: {
          color: showConf === null || showConf === void 0 ? void 0 : showConf.colorButton,
          background: showConf === null || showConf === void 0 ? void 0 : showConf.gradientColor
        },
        loading: submitting,
        onClick: updateUser,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Trans/* default */.Z, {
          children: "Save"
        })
      }),
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.Z, {
        labelCol: {
          span: 4
        },
        wrapperCol: {
          span: 14
        },
        layout: "horizontal",
        form: form,
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(card/* default */.Z, {
          style: {
            padding: 0
          },
          styles: {
            body: {
              padding: 0
            }
          },
          bordered: false,
          cover: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              height: 240,
              objectFit: 'cover',
              borderRadius: 10
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.Z.Item, {
              name: "background",
              wrapperCol: {
                span: 24
              },
              style: {
                width: '100%'
              },
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(ProfileCard_UploadBackground, {})
            })
          }),
          children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              padding: 20
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              className: "avatar",
              style: {
                marginTop: -60
              },
              children: /*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.Z.Item, {
                name: "avatar",
                children: /*#__PURE__*/(0,jsx_runtime.jsx)(ProfileCard_UploadAvatar, {})
              })
            })
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.Z.Item, {
          style: {
            marginTop: 20
          },
          label: /*#__PURE__*/(0,jsx_runtime.jsx)(Trans/* default */.Z, {
            children: "Name"
          }),
          name: "name",
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(input/* default */.Z, {})
        })]
      })
    })]
  });
});

/***/ }),

/***/ 88271:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V6: function() { return /* binding */ image2Attach; },
/* harmony export */   nU: function() { return /* binding */ convertToFileList; }
/* harmony export */ });
/* unused harmony exports IsEncrypt, parseMetaFile, parseAvatarWithMetaid, parseAvatarWithUri, compressImage, FileToAttachmentItem, FileToBinaryData, mergeFileLists, removeFileFromList */
/* harmony import */ var _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(90228);
/* harmony import */ var _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87999);
/* harmony import */ var _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var compressorjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(80396);
/* harmony import */ var compressorjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(compressorjs__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var crypto_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(25778);
/* harmony import */ var crypto_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var crypto_js_enc_hex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2447);
/* harmony import */ var crypto_js_enc_hex__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(crypto_js_enc_hex__WEBPACK_IMPORTED_MODULE_4__);
/* provided dependency */ var Buffer = __webpack_require__(36379)["Buffer"];


/* eslint-disable no-async-promise-executor */
/* eslint-disable @typescript-eslint/ban-ts-comment */



var IsEncrypt = /*#__PURE__*/function (IsEncrypt) {
  IsEncrypt[IsEncrypt["Yes"] = 1] = "Yes";
  IsEncrypt[IsEncrypt["No"] = 0] = "No";
  return IsEncrypt;
}({});
function parseMetaFile(rawUri) {
  // console.log("url", rawUri);
  // remove prefix: metafile://, then replace .jpeg with .jpg
  var METAFILE_API_HOST = 'https://api.show3.io/metafile';
  var METACONTRACT_API_HOST = 'https://api.show3.io/metafile/metacontract';
  var uri = rawUri.split(/metafile:\/\/|metacontract:\/\//)[1];
  // if there is no extension name in metaFile, add .png
  if (rawUri.includes('metafile')) {
    return "".concat(METAFILE_API_HOST, "/").concat(uri);
  } else if (rawUri.includes('metacontract')) {
    return "".concat(METACONTRACT_API_HOST, "/").concat(uri);
  } else {
    return rawUri;
  }
}
function parseAvatarWithMetaid(metaid) {
  var METAFILE_API_HOST = 'https://api.show3.io/metafile';
  return "".concat(METAFILE_API_HOST, "/avatar/compress/").concat(metaid);
}
function parseAvatarWithUri(originUri, txid) {
  var METAFILE_API_HOST = 'https://api.show3.io/metafile';
  if (originUri.includes('metafile')) {
    return "".concat(METAFILE_API_HOST, "/compress/").concat(txid);
  }
  if (originUri.includes('sensibile')) {
    return "".concat(METAFILE_API_HOST, "/sensible/").concat(originUri.split('sensibile://')[1]);
  }
  if (originUri.includes('metacontract')) {
    return "".concat(METAFILE_API_HOST, "/metacontract/").concat(originUri.split('metacontract://')[1]);
  }
}

// https://api.show3.io/metafile/sensible/0d0fc08db6e27dc0263b594d6b203f55fb5282e2/204dafb6ee543796b4da6f1d4134c1df2609bdf1/6
// https://api.show3.io/metafile/avatar/compress/2df27132058cd24ff9ef2939315c9ca0d8ec88733f5bda0df130b7798efea972

function compressImage(_x) {
  return _compressImage.apply(this, arguments);
}

// 降文件转为 AttachmentItem， 便于操作/上链
function _compressImage() {
  _compressImage = _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0___default()().mark(function _callee4(image) {
    var compress, useQuality, i, compressed;
    return _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0___default()().wrap(function _callee4$(_context4) {
      while (1) switch (_context4.prev = _context4.next) {
        case 0:
          compress = function compress(quality) {
            return new Promise(function (resolve, reject) {
              new (compressorjs__WEBPACK_IMPORTED_MODULE_2___default())(image, {
                quality: quality,
                convertSize: 100000,
                // 100KB
                success: resolve,
                error: reject
              });
            });
          }; // Use 0.6 compression ratio first; If the result is still larger than 1MB, use half of the compression ratio; Repeat 5 times until the result is less than 1MB, otherwise raise an error
          useQuality = 0.6;
          i = 0;
        case 3:
          if (!(i < 5)) {
            _context4.next = 13;
            break;
          }
          _context4.next = 6;
          return compress(useQuality);
        case 6:
          compressed = _context4.sent;
          if (!(compressed.size < 1000000)) {
            _context4.next = 9;
            break;
          }
          return _context4.abrupt("return", compressed);
        case 9:
          useQuality /= 2;
        case 10:
          i++;
          _context4.next = 3;
          break;
        case 13:
          throw new Error('Image is too large');
        case 14:
        case "end":
          return _context4.stop();
      }
    }, _callee4);
  }));
  return _compressImage.apply(this, arguments);
}
function FileToAttachmentItem(file) {
  var encrypt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : IsEncrypt.No;
  return new Promise( /*#__PURE__*/function () {
    var _ref = _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0___default()().mark(function _callee(resolve) {
      var readResult, chunkSize, hex, sha256Algo, index;
      return _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0___default()().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            readResult = function _readResult(blob) {
              return new Promise(function (resolve) {
                var reader = new FileReader();
                reader.onload = function () {
                  // @ts-ignore
                  var wordArray = crypto_js__WEBPACK_IMPORTED_MODULE_3___default().lib.WordArray.create(reader.result);
                  // @ts-ignore
                  var buffer = Buffer.from(reader.result);
                  // console.log("buffer", buffer, reader.result);
                  hex += buffer.toString('hex'); // 更新hex
                  // 增量更新计算结果
                  sha256Algo.update(wordArray); // 更新hash
                  resolve();
                };
                reader.readAsArrayBuffer(blob);
              });
            };
            // 分块读取，防止内存溢出，这里设置为20MB,可以根据实际情况进行配置
            chunkSize = 20 * 1024 * 1024;
            hex = ''; // 二进制
            sha256Algo = crypto_js__WEBPACK_IMPORTED_MODULE_3___default().algo.SHA256.create();
            index = 0;
          case 5:
            if (!(index < file.size)) {
              _context.next = 11;
              break;
            }
            _context.next = 8;
            return readResult(file.slice(index, index + chunkSize));
          case 8:
            index += chunkSize;
            _context.next = 5;
            break;
          case 11:
            resolve({
              data: hex,
              fileName: file.name,
              fileType: file.type,
              sha256: crypto_js_enc_hex__WEBPACK_IMPORTED_MODULE_4___default().stringify(sha256Algo.finalize()),
              url: URL.createObjectURL(file),
              encrypt: encrypt,
              size: file.size
            });
          case 12:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function (_x2) {
      return _ref.apply(this, arguments);
    };
  }());
}
function FileToBinaryData(file) {
  var encrypt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : IsEncrypt.No;
  return new Promise( /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve) {
      var readResult, sha256Algo, binaryData;
      return _regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            readResult = function _readResult2(file) {
              return new Promise(function (resolve) {
                var reader = new FileReader();
                reader.readAsBinaryString(file);
                reader.onload = function () {
                  var _reader$result;
                  // @ts-ignore
                  var wordArray = CryptoJs.lib.WordArray.create(reader.result);
                  // 增量更新计算结果
                  sha256Algo.update(wordArray); // 更新hash
                  // @ts-ignore
                  // const buffer = Buffer.from(reader.result);
                  // console.log("buffer", buffer, reader.result);
                  // hex += buffer.toString("hex"); // 更新hex

                  binaryData = (_reader$result = reader.result) === null || _reader$result === void 0 ? void 0 : _reader$result.toString('UTF-8');
                  // String.fromCharCode.apply(null, reader.result)
                  resolve();
                };
              });
            };
            sha256Algo = CryptoJs.algo.SHA256.create();
            binaryData = '';
            _context2.next = 5;
            return readResult(file);
          case 5:
            resolve({
              data: binaryData,
              fileName: file.name,
              fileType: file.type,
              sha256: encHex.stringify(sha256Algo.finalize()),
              url: URL.createObjectURL(file),
              encrypt: encrypt,
              size: file.size
            });
          case 6:
          case "end":
            return _context2.stop();
        }
      }, _callee2);
    }));
    return function (_x3) {
      return _ref2.apply(this, arguments);
    };
  }());
}
var image2Attach = /*#__PURE__*/function () {
  var _ref3 = _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0___default()().mark(function _callee3(images) {
    var attachments, i, current, compressed, result;
    return _Users_liuhaihua_btc_showNow_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0___default()().wrap(function _callee3$(_context3) {
      while (1) switch (_context3.prev = _context3.next) {
        case 0:
          attachments = [];
          i = 0;
        case 2:
          if (!(i < images.length)) {
            _context3.next = 14;
            break;
          }
          // 压缩图片
          current = images[i];
          _context3.next = 6;
          return compressImage(current);
        case 6:
          compressed = _context3.sent;
          _context3.next = 9;
          return FileToAttachmentItem(current.type === 'image/gif' ? current : compressed);
        case 9:
          result = _context3.sent;
          if (result) attachments.push(result);

          // if (attachments.length <= 3) {
          // } else {
          // 	break;
          // }
        case 11:
          i++;
          _context3.next = 2;
          break;
        case 14:
          return _context3.abrupt("return", attachments);
        case 15:
        case "end":
          return _context3.stop();
      }
    }, _callee3);
  }));
  return function image2Attach(_x4) {
    return _ref3.apply(this, arguments);
  };
}();
var mergeFileLists = function mergeFileLists(fileListA, fileListB) {
  var dataTransfer = new DataTransfer();
  for (var i = 0; i < fileListA.length; i++) {
    dataTransfer.items.add(fileListA[i]);
  }
  for (var _i = 0; _i < fileListB.length; _i++) {
    dataTransfer.items.add(fileListB[_i]);
  }
  return dataTransfer.files;
};
function removeFileFromList(fileList, index) {
  // Step 1: Create a new File array without the file at the specified index
  var filesArray = Array.from(fileList).slice(0, index).concat(Array.from(fileList).slice(index + 1));

  // Step 2: Create a new FileList object with the remaining files
  var newFileList = new DataTransfer();
  for (var i = 0; i < filesArray.length; i++) {
    newFileList.items.add(filesArray[i]);
  }

  // Step 3: Return the new FileList object
  return newFileList.files;
}
var convertToFileList = function convertToFileList(images) {
  var dataTransfer = new DataTransfer();
  images.forEach(function (image) {
    dataTransfer.items.add(image.file); // 添加每个 File 对象
  });
  return dataTransfer.files; // 返回 FileList 对象
};

/***/ }),

/***/ 96581:
/***/ (function() {

/* (ignored) */

/***/ })

}]);